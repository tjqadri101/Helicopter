<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta http-equiv="Content-Style-Type" content="text/css"> 
    <title>ECE350 Processor ISA (S2014)</title>
    <link href="ECE350%20Processor%20ISA%20_S2014__files/tool_base.css" type="text/css" rel="stylesheet" media="all">
    <link href="ECE350%20Processor%20ISA%20_S2014__files/tool.css" type="text/css" rel="stylesheet" media="all">
    <script type="text/javascript" language="JavaScript" src="ECE350%20Processor%20ISA%20_S2014__files/headscripts.js"></script>
    <style>body { padding: 5px !important; }</style>
  <!-- base href="https://sakai.duke.edu/access/content/group/13ca0f4b-a9fa-41e2-87b2-383db48a9315/Processor/ECE350%20Processor%20ISA%20_S2014_.htm" --></head>
  <body>
<p>
	&nbsp;</p>
<p>
	&nbsp;</p>
<p>
	&nbsp;</p>
<p>
	&nbsp;</p>
<p>
	&nbsp;</p>
<p>
	&nbsp;</p>
<p>
	&nbsp;</p>
<p>
	<title></title>
</p>
<p>
	&nbsp;</p>
<p>
	&nbsp;</p>
<p>
	&nbsp;</p>
<p>
	&nbsp;</p>
<p>
	&nbsp;</p>
<p>
	&nbsp;</p>
<p>
	&nbsp;</p>
<p>
	<link href="ECE350%20Processor%20ISA%20_S2014__files/tool_base.css" media="all" rel="stylesheet" type="text/css">
</p>
<table align="left" border="1" cellpadding="1" cellspacing="1" width="100%">
	<caption>
		ECE 350 Instruction Set Architecture</caption>
	<thead>
		<tr>
			<th scope="col">
				Instruction</th>
			<th scope="col">
				Opcode<br>
				(ALU Op)</th>
			<th scope="col" style="text-align: center;">
				Type</th>
			<th scope="col">
				Usage</th>
			<th scope="col">
				Operation</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>add</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>00000 (00000)</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				<code>R</code></td>
			<td align="left" valign="middle" width="200">
				<code>add $rd, $rs, $rt</code></td>
			<td>
				<code>$rd = $rs + $rt</code></td>
		</tr>
	</tbody>
</table>
<br>
<br>
<br>
<br>
<br>
<p>
	&nbsp;</p>
<table align="left" border="1" cellpadding="1" cellspacing="1" width="100%">
	<tbody>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>sub</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>00000 (00001</code>)</td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				<code>R</code></td>
			<td align="left" valign="middle" width="200">
				<code>sub$rd, $rs, $rt</code></td>
			<td>
				<code>$rd = $rs - $rt</code></td>
		</tr>
	</tbody>
</table>
<p>
	&nbsp;</p>
<table align="left" border="1" cellpadding="1" cellspacing="1" width="100%">
	<tbody>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>and</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>00000 (00010</code>)</td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				<code>R</code></td>
			<td align="left" valign="middle" width="200">
				<code>and $rd, $rs, $rt</code></td>
			<td>
				<code>$rd = $rs AND $rt</code></td>
		</tr>
	</tbody>
</table>
<br>
<br>
<br>
<table align="left" border="1" cellpadding="1" cellspacing="1" width="100%">
	<tbody>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>or</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>00000 (00011)</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				<code>R</code></td>
			<td align="left" valign="middle" width="200">
				<code>or $rd, $rs, $rt</code></td>
			<td>
				<code>$rd = $rs OR $rt</code></td>
		</tr>
	</tbody>
</table>
<br>
<br>
<br>
<table align="left" border="1" cellpadding="1" cellspacing="1" width="100%">
	<tbody>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>sll</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>00000 (00100)</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				<code>R</code></td>
			<td align="left" valign="middle" width="200">
				<code>sll $rd, $rs, shamt</code></td>
			<td>
				<code>$rd = $rs &lt;&lt; shamt</code></td>
		</tr>
	</tbody>
</table>
<br>
<br>
<br>
<table align="left" border="1" cellpadding="1" cellspacing="1" width="100%">
	<tbody>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>sra</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>00000 (00101)</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				<code>R</code></td>
			<td align="left" valign="middle" width="200">
				<code>sra $rd, $rs, shamt</code></td>
			<td>
				<code>$rd = $rs * 2^shamt</code></td>
		</tr>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>mul</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>00000 (00110)</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				<code>R</code></td>
			<td align="left" valign="middle" width="200">
				<code>mul $rd, $rs, $rt</code></td>
			<td>
				<code>$rd =</code> $rs * $rt (16b X 16b)</td>
		</tr>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>div</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>00000 (00111)</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				<code>R</code></td>
			<td align="left" valign="middle" width="200">
				<code>div $rd, $rs, $rt</code></td>
			<td>
				<code>$rd =</code> $rs / $rt (32b div. by 16b)</td>
		</tr>
	</tbody>
</table>
<br>
<br>
<br>
<table align="left" border="1" cellpadding="1" cellspacing="1" width="100%">
	<tbody>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<p>
					<code>CUSTOM R</code></p>
				<p>
					<code>(in ALU)</code></p>
			</td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>00000 (01000)<br>
				...<br>
				00000 (11111)</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				<code>R</code></td>
			<td align="left" valign="middle" width="200">
				<code>CUSTOM_R# $rd, $rs, $rt</code></td>
			<td>
				<code>$rd = CUSTOM#($rs, $rt)t</code></td>
		</tr>
	</tbody>
</table>
<br>
<br>
<table align="left" border="1" cellpadding="1" cellspacing="1" width="100%">
	<tbody>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>j</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>00001</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				<code>JI</code></td>
			<td align="left" valign="middle" width="200">
				<code>j N</code></td>
			<td>
				<code>PC = N</code></td>
		</tr>
	</tbody>
</table>
<br>
<br>
<br>
<table align="left" border="1" cellpadding="1" cellspacing="1" width="100%">
	<tbody>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>bne</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>00010</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				<code>I</code></td>
			<td align="left" valign="middle" width="200">
				<code>bne $rd, $rs, N</code></td>
			<td>
				<code>if($rd != $rs) PC = PC+1+N</code></td>
		</tr>
	</tbody>
</table>
<br>
<br>
<br>
<table align="left" border="1" cellpadding="1" cellspacing="1" width="100%">
	<tbody>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>jal</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>00011</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				<code>JI</code></td>
			<td align="left" valign="middle" width="200">
				<code>jal N</code></td>
			<td>
				<code>$r31 = PC+1; PC=N</code></td>
		</tr>
	</tbody>
</table>
<br>
<br>
<table align="left" border="1" cellpadding="1" cellspacing="1" width="100%">
	<tbody>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>jr</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>00100</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				<code>JII</code></td>
			<td align="left" valign="middle" width="200">
				<code>jr $rd</code></td>
			<td>
				<code>PC = $rd</code></td>
		</tr>
	</tbody>
</table>
<br>
<br>
<br>
<table align="left" border="1" cellpadding="1" cellspacing="1" width="100%">
	<tbody>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>addi</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>00101</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				<code>I</code></td>
			<td align="left" valign="middle" width="200">
				<code>addi $rd, $rs, N</code></td>
			<td>
				<code>$rd = $rs + N</code></td>
		</tr>
	</tbody>
</table>
<br>
<br>
<br>
<table align="left" border="1" cellpadding="1" cellspacing="1" width="100%">
	<tbody>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>blt</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>00110</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				<code>I</code></td>
			<td align="left" valign="middle" width="200">
				<code>blt $rd, $rs, N</code></td>
			<td>
				<code>if($rd &lt; $rs) PC=PC+1+N</code></td>
		</tr>
	</tbody>
</table>
<br>
<br>
<br>
<table align="left" border="1" cellpadding="1" cellspacing="1" width="100%">
	<tbody>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>sw</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>00111</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				<code>I</code></td>
			<td align="left" valign="middle" width="200">
				<code>sw $rd, N($rs)</code></td>
			<td>
				<code>MEM[$rs + N] = $rd</code></td>
		</tr>
	</tbody>
</table>
<br>
<br>
<br>
<table align="left" border="1" cellpadding="1" cellspacing="1" width="100%">
	<tbody>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>lw</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>01000</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				<code>I</code></td>
			<td align="left" valign="middle" width="200">
				<code>lw $rd, N($rs)</code></td>
			<td>
				<code>$rd = MEM[$rs + N]</code></td>
		</tr>
	</tbody>
</table>
<br>
<br>
<br>
<table align="left" border="1" cellpadding="1" cellspacing="1" width="100%">
	<tbody>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>custr1</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>01001</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				R</td>
			<td colspan="1" rowspan="8" style="text-align: center;" valign="middle" width="200">
				<code>CUSTOM $rd, $rs, $rt</code></td>
			<td colspan="1" rowspan="8" style="text-align: center;">
				<code>Custom</code></td>
		</tr>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>custr2</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>01010</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				R</td>
		</tr>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>custr3</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>01011</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				R</td>
		</tr>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>custr4</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>01100</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				R</td>
		</tr>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>custr5</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>01101</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				R</td>
		</tr>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>custr6</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>01110</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				R</td>
		</tr>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>custr7</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>01111</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				R</td>
		</tr>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>custr8</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>10000</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				R</td>
		</tr>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>custi1</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>10001</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				I</td>
			<td colspan="1" rowspan="5" style="text-align: center;" valign="middle" width="200">
				<code>CUSTOM $rd, $rs, N</code></td>
			<td colspan="1" rowspan="5" style="text-align: center;">
				<code>Custom</code></td>
		</tr>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>custi2</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>10010</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				I</td>
		</tr>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>custi3</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>10011</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				I</td>
		</tr>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>custi4</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>10100</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				I</td>
		</tr>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				&nbsp;</td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				&nbsp;</td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				&nbsp;</td>
		</tr>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>custj1</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>10101</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				JI</td>
			<td colspan="1" rowspan="2" style="text-align: center;" valign="middle" width="200">
				<code>CUSTOM N</code></td>
			<td colspan="1" rowspan="2" style="text-align: center;">
				<code>Custom</code></td>
		</tr>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>custj2</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<code>10110</code></td>
			<td style="text-align: center;" align="center" valign="middle" width="75">
				JI</td>
		</tr>
	</tbody>
</table>
<p>
	<br>
	<br>
	<br>
	&nbsp;</p>
<table align="left" border="1" cellpadding="1" cellspacing="1" width="100%">
	<tbody>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="50">
				<b>Instruction Type</b></td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<b>Instruction Format</b></td>
		</tr>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="50">
				R</td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<table border="1" cellpadding="0" cellspacing="0" width="100%">
					<tbody>
						<tr>
							<td align="center" valign="middle" width="100">
								Opcode [31:27]</td>
							<td align="center" valign="middle">
								RD [26:22]</td>
							<td align="center" valign="middle">
								RS [21:17]</td>
							<td align="center" valign="middle">
								RT [16:12]</td>
							<td align="center" valign="middle">
								shiftamt [11:7]</td>
							<td align="center" valign="middle">
								ALUop [6:2]</td>
							<td align="center" valign="middle">
								Zeros [1:0]</td>
						</tr>
					</tbody>
				</table>
			</td>
		</tr>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="50">
				I</td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<table border="1" cellpadding="0" cellspacing="0" width="100%">
					<tbody>
						<tr>
							<td align="center" valign="middle" width="100">
								Opcode [31:27]</td>
							<td align="center" valign="middle">
								RD [26:22]</td>
							<td align="center" valign="middle">
								RS [21:17]</td>
							<td align="center" valign="middle">
								Immediate [16:0]</td>
						</tr>
					</tbody>
				</table>
			</td>
		</tr>
		<tr>
			<td style="text-align: center;" align="center" valign="middle" width="50">
				J (I/II)</td>
			<td style="text-align: center;" align="center" valign="middle" width="100">
				<table border="1" cellpadding="0" cellspacing="0" width="100%">
					<tbody>
						<tr>
							<td align="center" valign="middle" width="100">
								Opcode [31:27]</td>
							<td align="center" valign="middle">
								Target [26:0]</td>
						</tr>
						<tr>
							<td align="center" valign="middle" width="100">
								Opcode [31:27]</td>
							<td align="center" valign="middle">
								RD [26:22]</td>
						</tr>
					</tbody>
				</table>
			</td>
		</tr>
	</tbody>
</table>
<p>
	<br>
	<br>
	<br>
	&nbsp;</p>
<p>
	&nbsp;</p>
<p>
	<br>
	<br>
	&nbsp;</p>
<pre><span style="font-size:12px;">I-type immediate field [16:0] is signed 2’s complement and sign-extended to the full 32-bit word size.

J-type target field [26:0] is extended to the full 32-bit PC size using the upper bits from the current PC+1.

Register fields that are undefined are filled with zeroes by the assembler.

Register $r0 always equals zero. Registers $r1 through $r30 are general purpose. Register $r31 stores the
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;link address of a jump-and-link instruction.

Instructions that change control flow (beq, blt, j, jal, jr) do not have a delay slot.

Memory is word-addressed. The instruction and data memory address spaces are separate. Static data
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;begins at data memory address zero. Stack data begins at the end of the data memory and grows
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;downwards. There is no preset boundary between the end of static data and the start of the upwardsgrowing
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;heap; this is a property of the assembly program.

After a reset, all register values are zero and program execution begins from instruction memory address
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zero. The memory's contents are not reset.</span></pre>
<p>
	&nbsp;</p>
<p>
	Useful hints for the Assembulator:</p>
<p>
	This assembly fragment (paste it into, and save- always save the file before assembling- the main window):</p>
<p>
	<code>.text<br>
	main: sw $r2,0($r7)<br>
	lw $r3,itis($r7)<br>
	<br>
	.data<br>
	wow: .word 0x00000001<br>
	itis: .string ASDASDASDASDASDASD<br>
	var: .char Z<br>
	label: .char A<br>
	heapsize: .word 0x00000000<br>
	myheap: .word 0x00000000</code><br>
	&nbsp;</p>
<p>
	Every program needs a ".text" and ".data" region, and a "main:" label. 
Program execution starts at "main:" Data variables can be allocated in 
the .data segment and referenced by their labels. For example, "itis" is
 shorthand for the "location in memory of a .data labelled 'itis'".</p>
<p>
	To assemble this fragment, enter the code (or open a file), save the 
code (to a file which INCLUDES a "." in it's name, like "mything.asm"), 
verify it (button with a check), and then you can simulate it (button 
with a play symbol). Next, you'll want to output some machine code and 
data in .mif files. Use the Assemble (or Assemble To) buttons (down 
arrows) to specify an output name (like "mything_output") which will be 
used to create two files (dmem.mif and imem.mif). You can inspect these 
files from within the Assembulator, or add them to your project in 
Quartus (ultimately).</p>
<p>
	The assembulator also expands certain "pseudo opcodes" like this:</p>
<p>
	<code>ldia = $rd, label + ldi $rd, N<br>
	ldi = $rd, N + addi $rd, $r0, N<br>
	ret = jr $ra<br>
	bgt = $rd, $rs, N + blt $rs, $rd, N<br>
	nop = add $r0, $r0, $r0<br>
	halt = j PC</code></p>
<p>
	It will also expand certain constants like:</p>
<p>
	<code>$zero = $R0<br>
	$Ra = $R31 </code></p>
<p>
	<code><i>Revised for ECE350, Spring 2014.</i><br>
	<br>
	<br>
	<br>
	..<br>
	&nbsp;</code></p>

  

</body></html>